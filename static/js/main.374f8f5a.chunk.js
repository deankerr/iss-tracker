(this["webpackJsonpiss-tracker"]=this["webpackJsonpiss-tracker"]||[]).push([[0],{20:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(3),c=n.n(s),o=(n(20),n(14)),i=n(13),l=n(4),p=n.n(l),u=n(8),d=n(6),h=n(7),j=n(10),g=n(9),S=n(15),v=(n(24),n(1));var b=function(){return Object(v.jsx)("div",{style:{position:"relative",top:-32,left:-32},children:Object(v.jsx)("img",{className:"ISSMarker",width:64,alt:"International Space Station",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/International_Space_Station.svg/512px-International_Space_Station.svg.png"})})};var m=function(e){return Object(v.jsx)("div",{className:"historyDot"})};var f=function(e){var t=e.data,n=Object(v.jsx)(v.Fragment,{children:"Loading"}),a=null;if(t){var r=t.name,s=t.temp;a=t.iconUrl,n=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:r}),Object(v.jsxs)("div",{children:[s,"\xb0C"]})]})}return Object(v.jsx)("div",{className:"weatherPanel",style:a?{backgroundImage:a}:{},children:n})},x=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoaded:!1,people:[]},e.getPeople=Object(u.a)(p.a.mark((function t(){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://api.open-notify.org/astros.json");case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,e.setState({people:a.people,isLoaded:!0}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("People API Error: ",t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getPeople()}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,n=e.people;return Object(v.jsxs)("div",{className:"peoplePanel",children:[Object(v.jsx)("div",{style:{textAlign:"center",marginBottom:"10px"},children:"People In Space"}),t?Object(v.jsx)("div",{className:"peopleList",children:Object(v.jsx)("ul",{children:n.map((function(e){return Object(v.jsxs)("li",{children:["(",e.craft,") ",e.name]})}))})}):Object(v.jsx)("p",{children:"Loading"})]})}}]),n}(r.a.Component),O=x,I="d005ce85a89379fd2945244d022dc2e7",P={lat:-37.813611,lng:144.963056},y=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={ISSPos:{lat:null,lng:null},ISSPosIsLoaded:!1,ISSPosHistory:[],weatherPanels:[]},e.getISSPos=Object(u.a)(p.a.mark((function t(){var n,a,r,s,c,o,i,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://api.open-notify.org/iss-now.json");case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,r=a.iss_position,s=r.latitude,c=r.longitude,o=+s,i=+c,e.state.ISSPosIsLoaded&&((l=e.state.ISSPosHistory).push(e.state.ISSPos),e.setState({ISSPosHistory:l})),e.setState({ISSPos:{lat:o,lng:i},ISSPosIsLoaded:!0}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("Map API Error: ",t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),e.handleMapClick=function(t){var n={lat:t.lat,lng:t.lng,data:null};e.getWeather(n);var a=[].concat(Object(i.a)(e.state.weatherPanels),[n]);e.setState({weatherPanels:a})},e.getWeather=function(){var e=Object(u.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://api.openweathermap.org/data/2.5/weather?lat=".concat(t.lat,"&lon=").concat(t.lng,"&units=metric&appid=").concat(I));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,console.log("OpenWeather response:",a),t.data={name:a.name,temp:a.main.temp,iconUrl:"url('http://openweathermap.org/img/wn/".concat(a.weather[0].icon,".png')")},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Weather API Error: ",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getISSPos(),setInterval(this.getISSPos,2e3)}},{key:"render",value:function(){var e=this.state.ISSPos,t=e.lat,n=e.lng,a=this.state,r=a.ISSPosIsLoaded,s=a.weatherPanels,c=r?{lat:t,lng:n}:P,i=this.state.ISSPosHistory;return Object(v.jsxs)("div",{className:"ISSTracker",children:[Object(v.jsx)("h1",{children:"ISS Tracker"}),Object(v.jsxs)("div",{className:"latLong",children:["Lat: ",t||"Loading"," Long: ",n||"Loading"]}),Object(v.jsx)(O,{}),Object(v.jsx)("div",{className:"GoogleMap",children:Object(v.jsxs)(S.a,{bootstrapURLKeys:{key:"AIzaSyCxFvalynPCLDFs6R9lP3IHy_uuim44KXc"},center:c,zoom:4,onClick:this.handleMapClick,children:[i.map((function(e){return Object(v.jsx)(m,{lat:e.lat,lng:e.lng})})),r?Object(v.jsx)(b,{lat:t,lng:n}):console.log("Loading ISS Pos"),s.map((function(e){return Object(v.jsx)(f,Object(o.a)({},e))}))]})})]})}}]),n}(r.a.Component),k=y,w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root")),w()}},[[26,1,2]]]);
//# sourceMappingURL=main.374f8f5a.chunk.js.map